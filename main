--[[ 
    üõ°Ô∏è GLOBAL UNCENSORED CHAT (GUC) - PREMIUM UI EDITION
    - Tamamen sans√ºrs√ºz ileti≈üim aƒüƒ±.
    - CoreGui entegrasyonlu modern "Chat Butonu".
    - RichText, S√ºr√ºkleme ve Dinamik Animasyonlar.
    
    KULLANIM (Loadstring):
    loadstring(game:HttpGet("https://raw.githubusercontent.com/KullaniciAdin/Repo/main/chat.lua"))()
]]

local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local MessagingService = game:GetService("MessagingService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

-- G√úVENLƒ∞K ANAHTARI
local NETWORK_ID = _G.ChatKey or "Global_Secret_Network_2026"

-- UI ROOT (CoreGui'ye baƒülƒ±)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Ultra_GlobalChat_V4"
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 999
ScreenGui.Parent = CoreGui

-- CHAT A√áMA BUTONU
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ChatToggle"
ToggleButton.Parent = ScreenGui
ToggleButton.Size = UDim2.new(0, 60, 0, 60)
ToggleButton.Position = UDim2.new(0, 25, 0.85, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 170)
ToggleButton.Text = "üí¨"
ToggleButton.TextSize = 30
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.AutoButtonColor = true
ToggleButton.ZIndex = 10

local BtnCorner = Instance.new("UICorner", ToggleButton)
BtnCorner.CornerRadius = UDim.new(1, 0)

local BtnStroke = Instance.new("UIStroke", ToggleButton)
BtnStroke.Color = Color3.fromRGB(255, 255, 255)
BtnStroke.Thickness = 2
BtnStroke.Transparency = 0.4

-- ANA PANEL
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainPanel"
MainFrame.Parent = ScreenGui
MainFrame.Size = UDim2.new(0, 400, 0, 480)
MainFrame.Position = UDim2.new(0, 100, 0.85, -480)
MainFrame.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = false 
MainFrame.ClipsDescendants = true

local MainCorner = Instance.new("UICorner", MainFrame)
MainCorner.CornerRadius = UDim.new(0, 20)

local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Color = Color3.fromRGB(40, 40, 40)
MainStroke.Thickness = 1

-- HEADER (√úST BAR)
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Size = UDim2.new(1, 0, 0, 60)
Header.BackgroundColor3 = Color3.fromRGB(22, 22, 22)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner", Header)
HeaderCorner.CornerRadius = UDim.new(0, 20)

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 20, 0, 0)
Title.Text = "üõ°Ô∏è SANS√úRS√úZ GLOBAL Aƒû"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 17
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

-- MESAJ KAYDI (LOG)
local ChatLog = Instance.new("ScrollingFrame")
ChatLog.Name = "ChatLog"
ChatLog.Size = UDim2.new(0.92, 0, 0.68, 0)
ChatLog.Position = UDim2.new(0.04, 0, 0.15, 0)
ChatLog.BackgroundTransparency = 1
ChatLog.ScrollBarThickness = 2
ChatLog.CanvasSize = UDim2.new(0, 0, 0, 0)
ChatLog.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 170)
ChatLog.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout", ChatLog)
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- INPUT AREA (MESAJ YAZMA)
local InputBox = Instance.new("TextBox")
InputBox.Name = "MessageInput"
InputBox.Size = UDim2.new(0.92, 0, 0, 50)
InputBox.Position = UDim2.new(0.04, 0, 0.86, 0)
InputBox.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
InputBox.Text = ""
InputBox.PlaceholderText = "Filtresiz mesajƒ±nƒ± buraya yaz..."
InputBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
InputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
InputBox.Font = Enum.Font.Gotham
InputBox.TextSize = 15
InputBox.ClearTextOnFocus = true
InputBox.Parent = MainFrame

local InputCorner = Instance.new("UICorner", InputBox)
InputCorner.CornerRadius = UDim.new(0, 10)

local InputStroke = Instance.new("UIStroke", InputBox)
InputStroke.Color = Color3.fromRGB(50, 50, 50)
InputStroke.Thickness = 1

-- TOGGLE ANIMASYONU VE MANTIƒûI
ToggleButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
    if MainFrame.Visible then
        MainFrame.Position = UDim2.new(0, 100, 0.85, -400) -- Ba≈ülangƒ±√ß konumu (Alttan gelecek)
        MainFrame:TweenPosition(UDim2.new(0, 100, 0.85, -480), "Out", "Quart", 0.4, true)
        ToggleButton.Text = "‚ùå"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    else
        ToggleButton.Text = "üí¨"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 170)
    end
end)

-- MESAJ EKLEME FONKSƒ∞YONU
local function AddMessage(sender, message)
    local MsgLabel = Instance.new("TextLabel")
    MsgLabel.Size = UDim2.new(1, 0, 0, 0)
    MsgLabel.AutomaticSize = Enum.AutomaticSize.Y
    MsgLabel.BackgroundTransparency = 1
    MsgLabel.Text = "<b><font color='#00FFCC'>@" .. sender .. "</font></b>: " .. message
    MsgLabel.RichText = true
    MsgLabel.TextColor3 = Color3.fromRGB(245, 245, 245)
    MsgLabel.TextXAlignment = Enum.TextXAlignment.Left
    MsgLabel.TextWrapped = true
    MsgLabel.Font = Enum.Font.Gotham
    MsgLabel.TextSize = 15
    MsgLabel.Parent = ChatLog
    
    ChatLog.CanvasPosition = Vector2.new(0, 999999)
end

-- MESAJ G√ñNDERME
InputBox.FocusLost:Connect(function(enterPressed)
    if enterPressed and InputBox.Text ~= "" then
        local msg = InputBox.Text
        pcall(function()
            MessagingService:PublishAsync(NETWORK_ID, {
                Sender = Players.LocalPlayer.Name,
                Message = msg
            })
        end)
        InputBox.Text = ""
    end
end)

-- MESAJLARI Dƒ∞NLE
pcall(function()
    MessagingService:SubscribeAsync(NETWORK_ID, function(data)
        local content = data.Data
        AddMessage(content.Sender, content.Message)
    end)
end)

-- S√úR√úKLEME (DRAG) FONKSƒ∞YONU
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then update(input) end
end)
